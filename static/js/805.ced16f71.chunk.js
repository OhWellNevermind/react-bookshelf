"use strict";(self.webpackChunkreact_bookshelf=self.webpackChunkreact_bookshelf||[]).push([[805],{805:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});var n=r(5861),a=r(9439),s=r(4687),o=r.n(s),l=r(1243),i=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("https://books-backend.p.goit.global/books/category-list",{signal:t.signal});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,n.Z)(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("All categories"!==t){e.next=5;break}return e.next=3,l.Z.get("https://books-backend.p.goit.global/books/top-books",{signal:r.signal});case 3:case 7:return n=e.sent,e.abrupt("return",n.data);case 5:return e.next=7,l.Z.get("https://books-backend.p.goit.global/books/category?category=".concat(t),{signal:r.signal});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),x=r(3433),p=r(2791),f=r(3733),d=r(184),u=function(e){var t=e.category,r=e.setCategory,n=e.id,a=e.active,s=e.setIsActiveIndex;return(0,d.jsx)("li",{onClick:function(e){s(n),r(e.currentTarget.textContent)},className:(0,f.Z)("hover:text-[#4F2EE8] dark:hover:text-[#EAC645] cursor-pointer transition-all text-[16px] leading-[1.33] tracking-[-0.36px] ",{"text-[#4F2EE8] dark:text-[#EAC645] uppercase":a,"dark:text-[#ffffff99]":!a}),children:t.list_name})},g=r(5218),m=function(e){var t=e.setCategory,r=e.activeIndex,s=e.setActiveIndex,l=(0,p.useState)([]),c=(0,a.Z)(l,2),f=c[0],m=c[1];return(0,p.useEffect)((function(){var e=new AbortController;function t(){return(t=(0,n.Z)(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:(r=t.sent).sort((function(e,t){var r=e.list_name.toUpperCase(),n=t.list_name.toUpperCase();return r<n?-1:r>n?1:0})),m([{list_name:"All categories"}].concat((0,x.Z)(r))),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(0),"ERR_CANCELED"!==t.t0.code){t.next=12;break}return t.abrupt("return");case 12:g.Am.error("Opps! Something wrong happened. Please try reloading the page.");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e.abort()}}),[]),(0,d.jsx)("ul",{className:"flex flex-col w-[307px] md:w-[309px] gap-[24px] h-[228px] md:h-[472px] overflow-y-scroll",children:(0,x.Z)(f).map((function(e,n){return(0,d.jsx)(u,{setCategory:t,setIsActiveIndex:s,category:e,id:n+1,active:n+1===r},n+1)}))})},h=r(8820),k=r(71),b=r(8014),v=r(7384),w=r(3842),j=r(6910),N=r(2930),y=r(2685),C=r(8759),E=(0,y.N8)(C.l);function S(e,t){(0,y.t8)((0,y.iH)(E,"users/"+e),{books:t})}var A,I=function(e){var t=e.onClose,r=e.bookInfo,n=e.open,s=e.setModalIsOpen,o=(0,p.useState)(!1),l=(0,a.Z)(o,2),i=l[0],c=l[1],f=(0,p.useContext)(w.N).theme,u=(0,j.F_)(N.I8),g=(0,a.Z)(u,1)[0],m=r._id,y=r.author,C=r.book_image,E=r.description,A=r.buy_links,I=r.title;(0,p.useEffect)((function(){c(!1);var e=localStorage.getItem("books");e?JSON.parse(e).forEach((function(e){e._id===m&&c(!0)})):localStorage.setItem("books",JSON.stringify([]))}),[m,f]);return(0,d.jsxs)(d.Fragment,{children:[console.log(f),Object.keys(r).length?(0,d.jsx)(v.Z,{sx:{"& .css-1t1j96h-MuiPaper-root-MuiDialog-paper":{borderColor:"".concat("dark"!==f?"#111":"#fff"),borderRadius:"18px",borderWidth:"2px"}},onClose:t,open:n,children:(0,d.jsxs)("div",{className:"dark:bg-[#202024] py-10 px-6 flex flex-col justify-center items-center relative",children:[(0,d.jsx)(h.oHP,{onClick:function(){s(!1)},size:24,className:"fill-black dark:fill-white absolute top-3 md:top-6 right-3 md:right-6 cursor-pointer"}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-10",children:[(0,d.jsx)("div",{className:"w-[287px] h-[408px] self-center md:w-[192px] md:h-[281px]",children:(0,d.jsx)("img",{className:"rounded-lg h-full w-full block",src:C,alt:I})}),(0,d.jsxs)("div",{className:"flex flex-col w-[287px]",children:[(0,d.jsx)("h3",{className:"text-[#111] dark:text-[#fff] text-[16px] md:text-[24px] font-bold tracking-[-0.64px] md:tracking-[-0.96px] leading-[1.12] md:leading-[1.16] w-[262px] mb-2",children:I}),(0,d.jsx)("p",{className:"text-[#B4AFAF] text-[12px] italic leading-[1.16] md:leading-[1.28] tracking-[-0.48px] md:tracking-[-0.56px] mb-5 w-fit",children:y}),(0,d.jsx)("p",{className:"w-[287px] md:w-[279px] max-h-[70px] overflow-y-auto text-[#111] dark:text-[#fff] text-[14px] leading-[1.28] tracking-[-0.56px] mb-5",children:E||"Sorry, currently there is no description for that book."}),(0,d.jsxs)("ul",{className:"flex justify-center w-fit gap-[8px] md:gap-[16px] lg:gap-[20px]",children:[(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:A[0].url,target:"_blank",rel:"noreferrer noopener",children:(0,d.jsx)(h.iwp,{className:"w-[16px] md:w-[28px] lg:w-[32px] h-[16px] md:h-[28px] lg:h-[32px]",fill:"".concat("dark"===f?"#fff":"#111")})})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:A[1].url,target:"_blank",rel:"noreferrer noopener",children:(0,d.jsx)(k.dbK,{className:"w-[16px] md:w-[28px] lg:w-[32px] h-[16px] md:h-[28px] lg:h-[32px] self-end",fill:"".concat("dark"===f?"#fff":"#111")})})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:A[2].url,target:"_blank",rel:"noreferrer noopener",children:(0,d.jsx)(b.xCL,{className:"w-[16px] md:w-[28px] lg:w-[32px] h-[16px] md:h-[28px] lg:h-[32px]",fill:"".concat("dark"===f?"#fff":"#111")})})})]})]})]}),g?i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"border-2 py-[14px] px-7 w-fit md:w-[500px] border-[#4F2EE8] rounded-[40px] uppercase  hover:text-[#fff] hover:bg-[#4F2EE8] ease-in duration-200 mb-2 flex justify-center items-center",value:JSON.stringify(r),onClick:function(e){var t=JSON.parse(e.currentTarget.value),r=(0,x.Z)(JSON.parse(localStorage.getItem("books"))).filter((function(e){return e._id!==t._id}));localStorage.setItem("books",JSON.stringify(r)),S(g.uid,r),c(!1)},children:(0,d.jsx)("span",{className:"block text-[#111] dark:text-[#fff] text-[14px] md:text-[18px] font-bold leading-[1.28] md:leading-[1.33] tracking-[-0.14px] md:tracking-[-0.18px] w-fit whitespace-nowrap uppercase",children:"Remove from shopping lists"})}),(0,d.jsx)("p",{className:"text-[#11111180] dark:text-[#ffffff80]  text-center text-[12px] tracking-[-0.48px] leading-[1.16] w-[242px] md:w-[324px]",children:"\u0421ongratulations! You have added the book to the shopping list. To delete, press the button \u201cRemove from the shopping list\u201d."})]}):(0,d.jsx)("button",{className:"border-2 py-[14px] px-7 w-fit md:w-[500px] border-[#4F2EE8] rounded-[40px] uppercase  hover:text-[#fff] hover:bg-[#4F2EE8] ease-in duration-200 flex justify-center items-center",value:JSON.stringify(r),onClick:function(e){var t=JSON.parse(e.currentTarget.value),r=localStorage.getItem("books");if(c(!0),null!==r){var n=[].concat((0,x.Z)(JSON.parse(r)),[t]);return localStorage.setItem("books",JSON.stringify(n)),void S(g.uid,n)}localStorage.setItem("books",JSON.stringify(t))},children:(0,d.jsx)("span",{className:"block text-[#111] dark:text-[#fff] text-[14px] font-bold leading-[1.28] tracking-[-0.14px] w-fit whitespace-nowrap uppercase",children:"Add to shopping lists"})}):(0,d.jsx)("p",{className:"text-[#11111180] dark:text-[#ffffff80]  text-center text-[15px] tracking-[-0.48px] leading-[1.16] w-full",children:"You need to sign up to be able to add books to shopping list!"})]})}):(0,d.jsx)(d.Fragment,{})]})},F=function(e){var t=e.setModalBookInfo,r=e.openModal,n=e.books,a=void 0===n?[]:n,s=e.booksCount,o=(0,p.useMemo)((function(){return a.filter((function(e,t){return t<=s}))}),[a,s]);return(0,d.jsx)("ul",{className:"flex gap-[24px] md:gap-[25px] mb-[32px]",children:o.map((function(e){return(0,d.jsx)("li",{className:"flex flex-col w-[335px] md:w-[218px] lg:w-[180px]",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{className:"mb-[14px] h-[485px] md:h-[316px] lg:h-[256px] rounded-[8px] cursor-pointer min-w-full",src:e.book_image,alt:"",onClick:function(){r(!0),t(e)}}),(0,d.jsx)("p",{className:"text-[#111] dark:text-[#fff] text-[16px] font-bold leading-[1.12] tracking-[-0.64px] mb-[4px]  overflow-hidden text-ellipsis whitespace-nowrap",children:e.title}),(0,d.jsx)("p",{className:"text-[#B4AFAF] text-[12px] italic leading-[1.16]  overflow-hidden text-ellipsis whitespace-nowrap",children:e.author})]})},e._id)}))})},_=function(e){var t=e.setModalBookInfo,r=e.openModal,n=e.book;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex flex-col w-[335px] md:w-[218px] lg:w-[180px]",children:[(0,d.jsx)("img",{className:"mb-[14px] h-[485px] md:h-[316px] lg:h-[256px] rounded-[8px] cursor-pointer min-w-full",src:n.book_image,alt:n.description,onClick:function(){r(!0),t(n)}}),(0,d.jsx)("p",{className:"text-[#111] dark:text-[#fff] text-[16px] font-bold leading-[1.12] tracking-[-0.64px] mb-[4px]  overflow-hidden text-ellipsis whitespace-nowrap",children:n.title}),(0,d.jsx)("p",{className:"text-[#B4AFAF] text-[12px] italic leading-[1.16]  overflow-hidden text-ellipsis whitespace-nowrap",children:n.author})]})})},Z=function(e){var t,r=e.books,n=e.currentCategory,s=e.setCategory,o=e.setActiveIndex,l=(0,p.useState)({}),i=(0,a.Z)(l,2),c=i[0],x=i[1],f=(0,p.useState)(!1),u=(0,a.Z)(f,2),g=u[0],m=u[1],h=(0,p.useState)(4),k=(0,a.Z)(h,2),b=k[0],v=k[1],w=function(){var e=window.outerWidth;v(e<767?0:e>=768&&e<1279?2:4)},j=function(){var e,t;e=w,t=250,A||(A=!0,setTimeout((function(){e(),A=!1}),t))};(0,p.useEffect)((function(){return w(),window.addEventListener("resize",j),function(){window.removeEventListener("resize",j)}}),[b]);var N=function(e){if(e){var t=e.split(" "),r=t[t.length-1];return t.splice(t.length-1,1),(0,d.jsxs)("h2",{className:"text-[#111] dark:text-[#fff] text-[48px] font-bold leading-[52px] tracking-[-1.92px] mb-[40px] self-start",children:[t.join(" ")," ",(0,d.jsx)("span",{className:"text-[#4F2EE8]",children:r})]})}};return(0,d.jsxs)(d.Fragment,{children:["All categories"===n?(0,d.jsx)(d.Fragment,{children:N("Best Sellers Book")}):(0,d.jsx)(d.Fragment,{children:N(null===(t=r[0])||void 0===t?void 0:t.list_name)}),(0,d.jsx)("ul",{className:"flex flex-col flex-wrap w-[100%] ",children:"All categories"===n?(0,d.jsx)("div",{className:"flex flex-wrap flex-col gap-y-[40px] gap-x-[24px] items-center justify-center lg:justify-start",children:r.map((function(e,t){return(0,d.jsx)("li",{className:"flex flex-wrap",children:"All categories"===n&&(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("p",{className:"mb-[18px] text-[#B4AFAF] uppercase leading-[1.28] tracking-[0.42px] font-normal text-[14px]",children:e.list_name}),(0,d.jsx)(F,{setModalBookInfo:x,openModal:m,books:e.books,booksCount:b}),(0,d.jsx)("button",{onClick:function(e){s(e.currentTarget.value),o(t+2)},value:e.list_name,className:"w-fit px-[28px] py-[14px] border-[2px] border-[#4F2EE8] rounded-[40px] place-self-end  hover:bg-[#4F2EE8] text-[#111] dark:text-[#fff] leading-[1.28] tracking-[-0.14] hover:text-[#fff] transition-all",children:"See more"})]})},t)}))}):(0,d.jsx)("div",{className:"flex flex-wrap gap-y-[40px] gap-x-[24px] items-center justify-center lg:justify-start ",children:r.map((function(e,t){return(0,d.jsx)("li",{children:!e.books&&(0,d.jsx)(_,{setModalBookInfo:x,openModal:m,book:e})},t)}))})}),(0,d.jsx)(I,{onClose:function(){m(!1)},open:g,bookInfo:c,setModalIsOpen:m})]})},O=r(7325),M=function(){var e=(0,p.useState)([]),t=(0,a.Z)(e,2),r=t[0],s=t[1],l=(0,p.useState)("All categories"),i=(0,a.Z)(l,2),x=i[0],f=i[1],u=(0,p.useState)(1),h=(0,a.Z)(u,2),k=h[0],b=h[1];return(0,p.useEffect)((function(){var e=new AbortController;function t(){return(t=(0,n.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=s,t.next=4,c(x,e);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=13;break;case 8:if(t.prev=8,t.t2=t.catch(0),"ERR_CANCELED"!==t.t2.code){t.next=12;break}return t.abrupt("return");case 12:g.Am.error("Opps! Something wrong happened. Please try reloading the page.");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return s([]),function(){t.apply(this,arguments)}(),function(){e.abort()}}),[x]),(0,d.jsxs)("main",{className:"flex flex-col lg:flex-row lg:items-start items-center gap-[20px] md:gap-[98px] lg:gap-5 px-5 pt-10 dark:bg-[#202024]",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row lg:flex-col items-center gap-[40px] lg:gap-[86px]",children:[(0,d.jsx)(m,{setCategory:f,activeIndex:k,setActiveIndex:b}),(0,d.jsx)(O._,{})]}),(0,d.jsx)("div",{className:"flex flex-col items-center",children:(0,d.jsx)(Z,{setCategory:f,currentCategory:x,books:r,activeIndex:k,setActiveIndex:b})})]})}}}]);
//# sourceMappingURL=805.ced16f71.chunk.js.map